yay: true

pkg:
  - tree tmux calc neovim
  - bash-completion fzf ripgrep
  - pipewire pipewire-pulse
  - p7zip
  - rustup
  - tag: bt
    pkg: bluez bluez-utils
  - tag: net
    pkg:
      - dhcpcd
      - wpa_supplicant wireless_tools
      - openssh
      - transmission-cli
      - tor torsocks
  - tag: devel
    pkg:
      - postgresql postgresql-libs
      - docker docker-compose
      - nodejs nvm yarn prettier
      - jdk-openjdk gradle maven
      - miniserve
      - shellcheck
      - go
  - tag: gui
    pkg:
      - xorg xorg-xinit
      - xf86-input-synaptics
      - xsel
      - xcolor
      - slock
      - feh scrot
      - vlc simplescreenrecorder
      - ttf-fira-sans ttf-fira-code
      - ttf-material-design-icons
      - adobe-source-han-sans-otc-fonts
      - adobe-source-han-serif-otc-fonts
      - materia-gtk-theme
      - pavucontrol
      - tag: net
        pkg: firefox chromium
      - tag: media
        pkg: gimp inkscape
  - tag: temp
    pkg: drive-bin ngrok

git:
  - repo: gitlab.com/osoy/osoy
    path: ~/.osoy/src/gitlab.com/osoy/osoy
  - repo: gitlab.com/rasmusmerzin/shl
    path: ~/.osoy/src/gitlab.com/rasmusmerzin/shl
  - repo: gitlab.com/rasmusmerzin/archerry
    path: ~/.osoy/src/gitlab.com/rasmusmerzin/archerry
  - tag: config
    git:
      - repo: gitlab.com/rasmusmerzin/cfg-bash
        path: ~/.osoy/src/gitlab.com/rasmusmerzin/cfg-bash
      - repo: gitlab.com/rasmusmerzin/cfg-tmux
        path: ~/.osoy/src/gitlab.com/rasmusmerzin/cfg-tmux
      - repo: gitlab.com/rasmusmerzin/cfg-nvim
        path: ~/.osoy/src/gitlab.com/rasmusmerzin/cfg-nvim
  - tag: gui
    git:
      - repo: gitlab.com/rasmusmerzin/dwm
        path: ~/.osoy/src/gitlab.com/rasmusmerzin/dwm
      - repo: gitlab.com/rasmusmerzin/st
        path: ~/.osoy/src/gitlab.com/rasmusmerzin/st
      - repo: gitlab.com/rasmusmerzin/dmenu
        path: ~/.osoy/src/gitlab.com/rasmusmerzin/dmenu
      - repo: gitlab.com/rasmusmerzin/dwmstatus
        path: ~/.osoy/src/gitlab.com/rasmusmerzin/dwmstatus

fs:
  - path: /etc/gitconfig
    write: |
      [init]
      defaultBranch = main
      [pull]
      rebase = true
  - tag: gui
    fs:
      - path: ~/.xinitrc
        write: |
          [ -x ~/.fehbg ] && ~/.fehbg
          dwmstatus &
          exec dwm
      - path: /etc/gtk-2.0/gtkrc
        write: |
          gtk-theme-name="Materia-dark-compact"
          gtk-font-name="Fira Sans 10"
      - path: /etc/gtk-3.0/settings.ini
        write: |
          [Settings]
          gtk-theme-name=Materia-dark-compact
          gtk-font-name=Fira Sans 10
      - path: /etc/X11/xorg.conf.d/70-synaptics.conf
        write: |
          Section "InputClass"
          Identifier "touchpad"
          Driver "synaptics"
          MatchIsTouchpad "on"
          Option "TapButton1" "1"
          Option "TapButton2" "3"
          Option "TapButton3" "2"
          Option "VertTwoFingerScroll" "on"
          Option "HorizEdgeScroll" "on"
          Option "CircularScrolling" "on"
          Option "CircScrollTrigger" "2"
          Option "FingerLow" "30"
          Option "FingerHigh" "50"
          Option "MaxTapTime" "125"
          EndSection

cmd:
  - rustup default stable
  - |
    rustup completions bash |
    sudo tee /usr/share/bash-completion/completions/rustup > /dev/null
  - |
    cd ~/.osoy/src/gitlab.com/osoy/osoy
    make
    ./osoy execute / make
    ./osoy link / -fv
  - tag: net
    cmd: sudo systemctl enable dhcpcd
  - tag: devel
    cmd:
      - sudo runuser -l postgres -c 'initdb -D /var/lib/postgres/data'
      - sudo usermod -aG docker $USER
      - yarn global add npm node-gyp degit wscat package-size
